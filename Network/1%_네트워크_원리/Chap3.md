## Chapter 3. 케이블의 앞은 LAN 기기였다

_허브와 스위치, 라우터의 탐험



클라이언트 PC가 가정이나 회사의 LAN에 접속하면 LAN 어댑터가 송신한 패킷은 스위칭 허브 등을 경유해서 인터넷 접속용 라우터에 도착한다. 라우터의 앞부분은 이미 인터넷에 속하기 때문에 여기서부터는 앞부분은 통신사가 패킷을 상대에게 운반하게 된다. 클라이언트 측에서 케이블에 송출한 패킷이 리피터 허브, 스위칭 허브, 라우터 등의 네트워크 기기를 경유해서 인터넷을 향하는 부분을 알아본다.



### 1. 케이블과 리피터, 허브 속을 신호가 흘러간다

컴퓨터에서 송신된 패킷은 허브나 라우터라는 중계 장치에 의해 중계되어 목적지를 향해 진행한다. 이때 중계 동작은 우편배달부가 편지의 내용을 보지 않고 배달하는 것처럼, 중계 장치 역시 데이터 부분을 보지 않고 패킷을 중계하게 된다. 따라서 데이터에 쓰여 있는 애플리케이션의 데이터나, TCP 프로토콜의 제어 정보 등이 패킷을 운반하는 동작에 영향을 주지 않는다.



신호가 LAN 케이블을 통과하는 사이에 신호의 에너지가 조금씩 떨어지기 때문에 케이블이 길어질수록 신호가 약화된다. 뿐만 아니라, 신호의 파형이 왜곡되기도 한다. 신호가 약화되고 파형이 많이 왜곡된다면 0과 1을 잘못 판별하게 되는데, 이것이 통신 오류의 원인이 된다. 이러한 잡음의 영향을 억제하기 위해 페어 케이블을 꼬아서 케이블을 구성한다.



신호가 리피터 허브에 도착하면 LAN 전체에 신호가 흩어진다. 전체에 패킷의 신호를 뿌리고 수신처 MAC 주소에 해당하는 기기만 패킷을 수신한다는 이더넷의 기본 원리를 그대로 실행한 것이다.



### 2. 스위칭 허브의 패킷 중계 동작

스위칭 허브는 신호를 흘리지 않고, 패킷의 신호를 수신하여 디지털 데이터의 형태로 되돌려 주고, 다시 신호로 고쳐서 송신하는 동작을 통해 패킷을 운반한다. 즉, 이더넷의 패킷을 그대로 목적지를 향해 중계하는 역할을 한다. 



### 3. 라우터의 패킷 중계 동작

라우터도 스위칭 허브와 마찬가지로 패킷을 중계하지만, 이더넷의 구조를 기초로 하여 만들어진 스위칭 허브와는 다르게 IP의 개념을 기초로 하여 만들어졌다.



### 4. 라우터의 부가 기능

인터넷의 출입구에 배치되는 라우터는 일반적으로 프라이빗 주소를 글로벌 주소로 변환하는 기능과 위험한 패킷을 차단하는 패킷 필터링 기능이 있다.




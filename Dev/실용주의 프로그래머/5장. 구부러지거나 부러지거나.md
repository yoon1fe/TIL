5장에서는 **되돌릴 수 있는** 의사 결정을 내릴 수 있는 방법에 대해서 알아봅니다. 이를 잘 활용하면 유연성을 확보할 수 있습니다. 결합도를 줄이는 방법, 메타데이터를 활용하여 세부사항을 코드 밖으로 분리하는 방법 등등을 알아봅시다~~



## 26. 결합도 줄이기와 디미터(데메테르) 법칙

모듈간의 의존 정도를 결합도`coupling` 이라고 합니다. 결합도가 낮을수록 각 모듈의 독립성이 높아지지요. 그럼 어떻게 결합도를 낮출 수 있을까요? 

코드를 모듈로 구성하고, 이들 간의 상호작용을 제한합시다. 그러면 한 모듈이 변경되거나 교체되어도 다른 모듈들은 변경없이 로직을 수행할 수 있을 것입니다.



불필요한 의존이 많은 시스템은 유지보수하기 어렵고, 시스템 자체가 매우 불안정한 경향이 있습니다. 때문에 의존도를 최소화하기 위해 **디미터 법칙**을 사용하여 메서드와 함수를 설계해야 합니다.



#### 디미터 법칙

디미터 법칙은 캡슐화와 낮은 결합도를 위한 법칙입니다. 디미터 법칙은 다음과 같은 간단한 규칙으로 구성됩니다.

- 메서드에서 생성한 객체의 메서드만 호출
- 파라미터로 받은 객체의 메서드만 호출
- 필드로 참조하는 객체의 메서드만 호출

다음 코드는 디미터 법칙을 위배한 간단한 예시 코드입니다.

``` java
public void processSome(Member member) {
    if (member.getDate().getTime() < ...) {	// 디미터 법칙 위배!
        ...
    }
}
```



디미터 법칙을 따르면 정말 유지보수하기 좋은 코드를 짤 수 있을까요? 

연구에 따르면 응답집합이 큰 클래스는 작은 클래스보다 에러를 발생시키기 쉽다고 합니다. 응답집합이란 클래스의 메서드가 직접 호출하는 함수의 개수를 의미합니다.

디미터 법칙을 따르면 함수를 호출하는 클래스의 응답집합 크기를 줄일 수 있기 때문에 좀 더 에러가 적은 클래스들을 만들 수 있습니다.

하지만 무조건적으로 디미터 법칙을 따르는 것은 능사가 아닙니다. 데이터베이스 스키마 설계 시 반정규화를 통해 성능을 개선하듯이, 디미터 법칙과 반대로 여러 모듈의 결합도를 높힘으로써 성능 향상을 노릴 수도 있습니다.



## 27. 메타프로그래밍

메타데이터를 이용하여 반환 매개 변수, 사용자 선호사항, 설치 디렉터리와 같은 애플리케이션 설정 옵션을 기술합시다. 

메타데이터란 쉽게 말해서 데이터에 관한 데이터입니다. 데이터베이스 스키마, 데이터 경로와 같은 것들이요. 하지만 여기서 말하는 메타데이터는 좀 더 넓은 의미로써 사용됩니다. 여기서 말하는 메타데이터는 애플리케이션을 기술하는 모든 데이터를 뜻합니다. 









##### Reference

개발자가 반드시 정복해야 할 객체지향과 디자인 패턴 - 최범균